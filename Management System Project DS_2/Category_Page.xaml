<Window x:Class="Management_System_Project_DS_2.Category_Page"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Management_System_Project_DS_2"
        mc:Ignorable="d"
        Title="Category" Height="500" Width="850" Background="#E3F2FD">

    <Window.Resources>

        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>

        <!-- Custom Rounded Button Style -->
        <Style x:Key="RoundedButtonStyle" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="5" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="20">

        <!-- Background Gradient -->
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#bbdefb" Offset="0"/>
                <GradientStop Color="#e3f2fd" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <!-- Product Category List Header -->
        <TextBlock Text="Product Category List"
                   FontSize="24" FontWeight="Bold" Foreground="#0D47A1"
                   HorizontalAlignment="Left" VerticalAlignment="Top"
                   Margin="281,20,0,0" Height="35"/>

        <!-- Add Category Button -->
        <Button Content="➕ Add Category" Height="35" VerticalAlignment="Top"
                Margin="651,47,19,0"
                Background="#1976D2" Foreground="White"
                FontWeight="SemiBold"
                BorderThickness="0"
                Cursor="Hand"
                Style="{StaticResource RoundedButtonStyle}"
                Click="AddCategory_Click"/>

        <!-- DataGrid inside glassy panel -->
        <Border Background="#CCFFFFFF" CornerRadius="10" Padding="10" Margin="0,90,0,0">
            <DataGrid x:Name="CategoryDataGrid"
                      AutoGenerateColumns="False"
                      Background="White"
                      RowBackground="#FFFFFF"
                      AlternatingRowBackground="#F5F5F5"
                      GridLinesVisibility="None"
                      CanUserAddRows="False"
                      BorderBrush="Transparent"
                      ColumnHeaderHeight="35"
                      RowHeight="35">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="S/N" Width="50" Binding="{Binding SerialNumber}"/>
                    <DataGridTextColumn Header="Category" Width="*" Binding="{Binding CategoryName}"/>
                    <DataGridTextColumn Header="Created At" Width="150" Binding="{Binding CreatedAt}"/>
                    <DataGridTemplateColumn Header="Action" Width="150">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <Button Content="Edit" Width="50" Margin="2"
                                            Background="#64B5F6" Foreground="White" BorderThickness="0" Cursor="Hand"
                                            Style="{StaticResource RoundedButtonStyle}"/>
                                    <Button Content="Delete" Width="50" Margin="2"
                                            Background="#E57373" Foreground="White" BorderThickness="0" Cursor="Hand"
                                            Style="{StaticResource RoundedButtonStyle}"/>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>

        <!-- Popup Overlay -->
        <Grid x:Name="PopupOverlay" Background="#80000000" Visibility="Collapsed">
            <Border Background="White" CornerRadius="10" Padding="20" Width="300" Height="200" VerticalAlignment="Center" HorizontalAlignment="Center">
                <StackPanel>
                    <TextBlock Text="Add New Category" FontSize="18" FontWeight="Bold" Margin="0,0,0,10" HorizontalAlignment="Center"/>

                    <!-- Placeholder workaround -->
                    <Grid>
                        <TextBox x:Name="CategoryNameTextBox" Margin="0,0,0,10"/>
                        <TextBlock Text="Enter Product Name" 
                                   Foreground="Gray" 
                                   Margin="5,3,0,0" 
                                   IsHitTestVisible="False" 
                                   Visibility="{Binding Text.IsEmpty, ElementName=CategoryNameTextBox, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                    </Grid>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">

                        <Button Content="Add" Width="70" Margin="0,0,10,0"
                                Background="#4CAF50" Foreground="White" Style="{StaticResource RoundedButtonStyle}"
                                Click="Add_Click"/>
                        <Button Content="Discard" Width="70"
                                Background="#E57373" Foreground="White" Style="{StaticResource RoundedButtonStyle}"
                                Click="Discard_Click"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>

    </Grid>
</Window>
